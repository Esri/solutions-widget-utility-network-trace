import{r as t,c as e,h as i,H as a,g as s}from"./p-551d452f.js";import{g as r}from"./p-ddb29161.js";import{g as n}from"./p-4bacf9d8.js";import{u as o,C as c,c as l}from"./p-1312f80e.js";import{T as h,g as p}from"./p-ef7fb9f9.js";import{d,a as u,s as m,p as v,i as g}from"./p-0e811b43.js";const f=class{constructor(i){t(this,i),this.calciteDatePickerChange=e(this,"calciteDatePickerChange",7),this.calciteDatePickerRangeChange=e(this,"calciteDatePickerRangeChange",7),this.active=!1,this.intlPrevMonth=h.prevMonth,this.intlNextMonth=h.nextMonth,this.locale=document.documentElement.lang||"en",this.scale="m",this.range=!1,this.proximitySelectionDisabled=!1,this.layout="horizontal",this.focusedInput="start",this.hasShadow=!!document.head.attachShadow,this.setEndInput=t=>{this.endInput=t},this.deactivate=()=>{this.active=!1},this.keyUpHandler=t=>{"Escape"===n(t.key)&&(this.active=!1)},this.inputBlur=t=>{this.blur(t.detail)},this.startInputFocus=()=>{this.active=!0,this.focusedInput="start"},this.endInputFocus=()=>{this.active=!0,this.focusedInput="end"},this.inputInput=t=>{this.input(t.detail.value)},this.setMenuEl=t=>{t&&(this.menuEl=t,this.createPopper())},this.setStartWrapper=t=>{this.startWrapper=t,this.setReferenceEl()},this.setEndWrapper=t=>{this.endWrapper=t,this.setReferenceEl()},this.handleDateChange=t=>{this.range||(this.valueAsDate=t.detail)},this.handleDateRangeChange=t=>{if(!this.range||!t.detail)return;const{startDate:e,endDate:i}=t.detail;this.startAsDate=e,this.endAsDate=i,clearTimeout(this.endInputFocusTimeout),e&&"start"===this.focusedInput&&(this.endInputFocusTimeout=window.setTimeout((()=>{var t;return null===(t=this.endInput)||void 0===t?void 0:t.setFocus()}),150))}}activeHandler(){this.reposition()}focusInHandler(t){this.hasShadow||this.el.contains(t.target)||(this.active=!1)}calciteDaySelectHandler(){this.active=!1}async reposition(){const{popper:t,menuEl:e}=this,i=this.getModifiers();t?o({el:e,modifiers:i,placement:"bottom-start",popper:t}):this.createPopper()}connectedCallback(){this.loadLocaleData(),this.value&&(this.valueAsDate=d(this.value)),this.start&&this.setStartAsDate(d(this.start)),this.end&&this.setEndAsDate(d(this.end)),this.createPopper()}disconnectedCallback(){this.destroyPopper()}render(){var t,e;const s=d(this.min),n=d(this.max),o=u(this.range?this.startAsDate:this.valueAsDate,s,n),l=this.range?u(this.endAsDate,s,n):null,h=l?l.toLocaleDateString(this.locale):"",p=o?o.toLocaleDateString(this.locale):"",m=r(this.el);return i(a,{dir:m,onBlur:this.deactivate,onKeyUp:this.keyUpHandler,role:"application"},this.localeData&&i("div",{"aria-expanded":this.active.toString(),class:"input-container",role:"application"},i("div",{class:"input-wrapper",ref:this.setStartWrapper},i("calcite-input",{class:"input "+("vertical"===this.layout&&this.range?"no-bottom-border":""),icon:"calendar","number-button-type":"none",onCalciteInputBlur:this.inputBlur,onCalciteInputFocus:this.startInputFocus,onCalciteInputInput:this.inputInput,placeholder:null===(t=this.localeData)||void 0===t?void 0:t.placeholder,scale:this.scale,type:"text",value:p})),i("div",{"aria-hidden":(!this.active).toString(),class:"menu-container",ref:this.setMenuEl},i("div",{class:{"calendar-picker-wrapper":!0,"calendar-picker-wrapper--end":"end"===this.focusedInput,[c.animation]:!0,[c.animationActive]:this.active}},i("calcite-date-picker",{activeRange:this.focusedInput,dir:m,endAsDate:this.endAsDate,headingLevel:this.headingLevel,intlNextMonth:this.intlNextMonth,intlPrevMonth:this.intlPrevMonth,locale:this.locale,max:this.max,min:this.min,onCalciteDatePickerChange:this.handleDateChange,onCalciteDatePickerRangeChange:this.handleDateRangeChange,proximitySelectionDisabled:this.proximitySelectionDisabled,range:this.range,scale:this.scale,startAsDate:this.startAsDate,tabIndex:0,valueAsDate:this.valueAsDate}))),this.range&&"horizontal"===this.layout&&i("div",{class:"horizontal-arrow-container"},i("calcite-icon",{flipRtl:!0,icon:"arrow-right",scale:"s"})),this.range&&"vertical"===this.layout&&i("div",{class:"vertical-arrow-container"},i("calcite-icon",{icon:"arrow-down",scale:"s"})),this.range&&i("div",{class:"input-wrapper",ref:this.setEndWrapper},i("calcite-input",{class:"input",icon:"calendar","number-button-type":"none",onCalciteInputBlur:this.inputBlur,onCalciteInputFocus:this.endInputFocus,onCalciteInputInput:this.inputInput,placeholder:null===(e=this.localeData)||void 0===e?void 0:e.placeholder,ref:this.setEndInput,scale:this.scale,type:"text",value:h}))))}setReferenceEl(){const{focusedInput:t,layout:e,endWrapper:i,startWrapper:a}=this;this.referenceEl="end"===t||"vertical"===e?i||a:a||i,this.createPopper()}getModifiers(){return[{name:"flip",enabled:!0,options:{fallbackPlacements:["top-start","top","top-end","bottom-start","bottom","bottom-end"]}}]}createPopper(){this.destroyPopper();const{menuEl:t,referenceEl:e}=this;if(!t||!e)return;const i=this.getModifiers();this.popper=l({el:t,modifiers:i,placement:"bottom-start",referenceEl:e})}destroyPopper(){const{popper:t}=this;t&&t.destroy(),this.popper=null}valueWatcher(t){this.valueAsDate=d(t)}startWatcher(t){this.setStartAsDate(d(t))}endWatcher(t){this.setEndAsDate(d(t))}async loadLocaleData(){const{locale:t}=this;this.localeData=await p(t)}setStartAsDate(t){this.startAsDate=t}setEndAsDate(t){this.endAsDate=t}input(t){const e=this.getDateFromInput(t);if(e)if(this.range){let t=!1;"start"===this.focusedInput?(t=!this.startAsDate||!m(e,this.startAsDate),t&&(this.startAsDate=e)):"end"===this.focusedInput&&(t=!this.endAsDate||!m(e,this.endAsDate),t&&(this.endAsDate=e))}else this.valueAsDate=e}blur(t){const{locale:e,focusedInput:i,endAsDate:a,range:s,startAsDate:r,valueAsDate:n}=this;this.getDateFromInput(t.value)||(!s&&n?t.value=n.toLocaleDateString(e):"start"===i&&r?t.value=r.toLocaleDateString(e):"end"===i&&a&&(t.value=a.toLocaleDateString(e)))}getDateFromInput(t){if(!this.localeData)return!1;const{separator:e}=this.localeData,{day:i,month:a,year:s}=v(t,this.localeData),r=i>0,n=a>-1,o=new Date(s,a,i);o.setFullYear(s);const c=!isNaN(o.getTime()),l=t.split(e).filter((t=>t)).length>2,h=s.toString().length>0;return!!(r&&n&&c&&l&&h&&g(o,this.min,this.max))&&o}get el(){return s(this)}static get watchers(){return{active:["activeHandler"],layout:["setReferenceEl"],focusedInput:["setReferenceEl"],value:["valueWatcher"],start:["startWatcher"],end:["endWatcher"],locale:["loadLocaleData"]}}};f.style="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:host{--calcite-icon-size:1rem;--calcite-spacing-quarter:0.25rem;--calcite-spacing-half:0.5rem;--calcite-spacing-three-quarters:0.75rem;--calcite-spacing:1rem;--calcite-spacing-plus-quarter:1.25rem;--calcite-spacing-plus-half:1.5rem;--calcite-spacing-double:2rem;--calcite-menu-min-width:10rem;--calcite-header-min-height:3rem;--calcite-footer-min-height:3rem}:root{--calcite-popper-transition:150ms ease-in-out}:host([hidden]){display:none}:host{display:inline-block;vertical-align:top;width:100%;position:relative;overflow:visible;box-shadow:none}:host .menu-container .calcite-popper-anim{position:relative;z-index:1;transition:var(--calcite-popper-transition);visibility:hidden;transition-property:transform, visibility, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);border-radius:var(--calcite-border-radius)}:host .menu-container[data-popper-placement^=bottom] .calcite-popper-anim{transform:translateY(-5px)}:host .menu-container[data-popper-placement^=top] .calcite-popper-anim{transform:translateY(5px)}:host .menu-container[data-popper-placement^=left] .calcite-popper-anim{transform:translateX(5px)}:host .menu-container[data-popper-placement^=right] .calcite-popper-anim{transform:translateX(-5px)}:host .menu-container[data-popper-placement] .calcite-popper-anim--active{opacity:1;visibility:visible;transform:translate(0)}.calendar-picker-wrapper{box-shadow:none;position:static;transform:translate3d(0, 0, 0);width:100%;line-height:0}:host([scale=s]){max-width:216px}:host([scale=m]){max-width:286px}:host([scale=l]){max-width:398px}.input-wrapper{position:relative}:host([range]) .input-container{display:flex;align-items:center}:host([range]) .input-wrapper{flex:1 1 auto}:host([range]) .horizontal-arrow-container{background-color:var(--calcite-ui-background);padding:0 var(--calcite-spacing-quarter);border:1px solid var(--calcite-ui-border-1);border-left:none;border-right:none;height:42px;display:flex;align-items:center;flex:0 0 auto}:host([range][layout=vertical]) .input-wrapper{width:100%}:host([range][layout=vertical]) .input-container{flex-direction:column;align-items:start}:host([range][layout=vertical]) .calendar-picker-wrapper--end{transform:translate3d(0, 0, 0)}:host([range][layout=vertical]) .vertical-arrow-container{position:absolute;left:0;top:36px;z-index:1;background-color:var(--calcite-ui-foreground-1);padding-left:0.625rem;padding-right:0.625rem;margin-left:1px;margin-right:1px}:host([scale=s][range]:not([layout=vertical])){max-width:462px}:host([scale=s][range]:not([layout=vertical])) .calendar-picker-wrapper{width:216px}:host([scale=s][range]:not([layout=vertical])) .horizontal-arrow-container{height:30px}:host([scale=m][range]:not([layout=vertical])){max-width:596px}:host([scale=m][range]:not([layout=vertical])) .calendar-picker-wrapper{width:286px}:host([scale=l][range]:not([layout=vertical])){max-width:820px}:host([scale=l][range]:not([layout=vertical])) .calendar-picker-wrapper{width:398px}:host([scale=l][range]:not([layout=vertical])) .horizontal-arrow-container{height:54px}.menu-container{display:block;position:absolute;z-index:900;transform:scale(0);visibility:hidden;pointer-events:none;width:100%}:host([active]) .menu-container{pointer-events:initial;visibility:visible}.input .calcite-input-wrapper{margin-top:0}:host([range][layout=vertical][scale=s]) .vertical-arrow-container{top:24px}:host([range][layout=vertical][scale=l]) .vertical-arrow-container{top:50px;padding-left:0.875rem;padding-right:0.875rem}:host([range][layout=vertical][active]) .vertical-arrow-container{display:none}";export{f as calcite_input_date_picker}