import{r as t,c as s,h as i,H as e,g as a}from"./p-551d452f.js";import{n as r}from"./p-ddb29161.js";import{T as o}from"./p-98e006ca.js";const c=class{constructor(i){t(this,i),this.calciteTreeSelect=s(this,"calciteTreeSelect",7),this.lines=!1,this.root=!0,this.scale="m",this.selectionMode=o.Single}componentWillRender(){const t=this.el.parentElement.closest("calcite-tree");this.lines=t?t.lines:this.lines,this.scale=t?t.scale:this.scale,this.selectionMode=t?t.selectionMode:this.selectionMode,this.root=!t}render(){return i(e,{"aria-multiselectable":this.selectionMode===o.Multi||this.selectionMode===o.MultiChildren,role:this.root?"tree":void 0,tabindex:this.root?"0":void 0},i("slot",null))}onFocus(){if(this.root){const t=this.el.querySelector("calcite-tree-item[selected]"),s=this.el.querySelector("calcite-tree-item");(t||s).focus()}}onClick(t){const s=t.target,i=r(s.querySelectorAll("calcite-tree-item")),e=t.detail.modifyCurrentSelection&&(this.selectionMode===o.Multi||this.selectionMode===o.MultiChildren),a=this.selectionMode===o.MultiChildren||this.selectionMode===o.Children,c=!e&&((this.selectionMode===o.Single||this.selectionMode===o.Multi)&&i.length<=0||this.selectionMode===o.Children||this.selectionMode===o.MultiChildren),h=this.selectionMode===o.Children||this.selectionMode===o.MultiChildren;if(this.root){const n=[];null!==this.selectionMode&&(!s.hasChildren||s.hasChildren&&(this.selectionMode===o.Children||this.selectionMode===o.MultiChildren))&&n.push(s),a&&i.forEach((t=>{n.push(t)})),c&&r(this.el.querySelectorAll("calcite-tree-item[selected]")).forEach((t=>{n.includes(t)||(t.selected=!1)})),h&&!t.detail.forceToggle&&(s.expanded=!0),e&&window.getSelection().removeAllRanges(),n.forEach(e&&s.selected||a&&t.detail.forceToggle?t=>{t.selected=!1}:t=>{t.selected=!0})}this.root&&(t.preventDefault(),t.stopPropagation()),this.calciteTreeSelect.emit({selected:r(this.el.querySelectorAll("calcite-tree-item")).filter((t=>t.selected))})}get el(){return a(this)}};c.style="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-popper-transition:150ms ease-in-out}:host([hidden]){display:none}:host{display:block;outline:none}";export{c as calcite_tree}