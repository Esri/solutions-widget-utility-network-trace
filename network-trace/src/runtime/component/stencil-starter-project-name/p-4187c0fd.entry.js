import{r as t,h as s,H as i}from"./p-551d452f.js";import{e}from"./p-f450c62e.js";import{g as o}from"./p-46d99191.js";import{T as h,a as l}from"./p-d6289abe.js";const r=class{constructor(s){t(this,s),this.timeouts=new WeakMap,this.selector=`[${h}]`,this.queryTooltip=t=>e(t.closest(this.selector)),this.clearTooltipTimeout=t=>{const{timeouts:s}=this;s.has(t)&&window.clearTimeout(s.get(t))},this.focusedToggle=({referenceEl:t,tooltip:s,value:i})=>{if(this.focusedReferenceEl=i?t:null,s===this.hoveredTooltipEl)return this.hoveredTooltipEl=null,this.clearTooltipTimeout(s),void this.toggleFocusedTooltip(s,i);const{hoveredTooltipEl:e,hoveredReferenceEl:o}=this;t!==o&&s!==e&&this.toggleFocusedTooltip(s,i)},this.toggleFocusedTooltip=(t,s)=>{t.open=s,this.focusedTooltipEl=s?t:null},this.toggleHoveredTooltip=(t,s)=>{t.open=s,this.hoveredTooltipEl=s?t:null},this.hoveredToggle=({referenceEl:t,tooltip:s,value:i})=>{const{focusedReferenceEl:e,focusedTooltipEl:o}=this;if(this.hoveredReferenceEl=i?t:null,t===e||s===o)return;this.hoveredTooltipEl=s,this.clearTooltipTimeout(s);const{timeouts:h}=this,r=window.setTimeout((()=>this.toggleHoveredTooltip(s,i)),l);h.set(s,r)},this.activeTooltipHover=(t,s)=>{const{hoveredTooltipEl:i}=this;i&&(t.composedPath().includes(i)?this.clearTooltipTimeout(i):this.hoveredToggle({referenceEl:s,tooltip:i,value:!1}))},this.hoverEvent=(t,s)=>{const i=t.target;this.activeTooltipHover(t,i);const e=this.queryTooltip(i);e&&this.hoveredToggle({referenceEl:i,tooltip:e,value:s})},this.focusEvent=(t,s)=>{const i=t.target,e=this.queryTooltip(i);e&&this.focusedToggle({referenceEl:i,tooltip:e,value:s})}}render(){return s(i,null)}keyUpHandler(t){if("Escape"===o(t.key)){const{hoveredTooltipEl:t,focusedTooltipEl:s}=this;this.hoveredReferenceEl=null,this.focusedReferenceEl=null,t&&(this.clearTooltipTimeout(t),this.toggleHoveredTooltip(t,!1)),s&&this.toggleFocusedTooltip(s,!1)}}mouseEnterShow(t){this.hoverEvent(t,!0)}mouseLeaveHide(t){this.hoverEvent(t,!1)}focusShow(t){this.focusEvent(t,!0)}blurHide(t){this.focusEvent(t,!1)}};export{r as calcite_tooltip_manager}