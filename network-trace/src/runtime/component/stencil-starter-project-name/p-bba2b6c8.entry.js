import{a as t,r as i,c as e,h as a,H as s,g as n}from"./p-551d452f.js";import{g as c}from"./p-f450c62e.js";import{g as r}from"./p-46d99191.js";import{d as o,a as l,b as h,p as d,i as u}from"./p-78f165ad.js";const p=["ar","bs","ca","cs","da","de","de-CH","el","en","en-AU","en-CA","en-GB","es","es-MX","et","fi","fr","fr-CH","he","hi","hr","hu","id","it","it-CH","ja","ko","lt","lv","mk","nb","nl","pl","pt","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],f={},m={};async function b(i){const e=function(t=""){if(p.indexOf(t)>-1)return t;{const i=t.split("-")[0];return p.indexOf(i)>-1?i:"en"}}(i);if(f[e])return f[e];m[e]||(m[e]=fetch(t(`./calcite-date-nls/${e}.json`)).then((t=>t.json())).catch((()=>(console.error(`Translations for "${e}" not found or invalid, falling back to english`),b("en")))));const a=await m[e];return f[e]=a,a}const v=class{constructor(t){i(this,t),this.calciteDateChange=e(this,"calciteDateChange",7),this.active=!1,this.intlPrevMonth="previous month",this.intlNextMonth="next month",this.locale=document.documentElement.lang||"en-US",this.noCalendarInput=!1,this.scale="m",this.hasShadow=!!document.head.attachShadow,this.syncThisToProxyInput=()=>{this.min=this.inputProxy.min,this.max=this.inputProxy.max;const t=o(this.min),i=o(this.max),e=o(this.inputProxy.value);this.value=l(h(e,t,i))},this.syncProxyInputToThis=()=>{this.inputProxy&&(this.inputProxy.value=this.value||"",this.min&&(this.inputProxy.min=this.min),this.max&&(this.inputProxy.max=this.max))}}focusOutHandler(){this.reset()}focusInHandler(t){this.hasShadow||this.el.contains(t.srcElement)||this.reset()}keyDownHandler(t){"Escape"===r(t.key)&&this.reset()}connectedCallback(){this.setupProxyInput(),this.loadLocaleData(),this.value&&this.setValueAsDate(this.value)}componentWillRender(){this.syncProxyInputToThis()}render(){const t=o(this.min),i=o(this.max),e=h(this.valueAsDate,t,i),n=this.getActiveDate(e,t,i),r=e?e.toLocaleDateString(this.locale):"",l=c(this.el);return a(s,{dir:l,role:"application"},a("div",{class:"slot"},a("slot",null)),!this.noCalendarInput&&this.localeData&&a("div",{role:"application"},a("calcite-input",{class:"input",icon:"calendar","number-button-type":"none",onCalciteInputBlur:t=>this.blur(t.detail),onCalciteInputFocus:()=>this.active=!0,onCalciteInputInput:t=>this.input(t.detail.value),placeholder:this.localeData.placeholder,scale:this.scale,type:"text",value:r})),this.localeData&&a("div",{class:"calendar-picker-wrapper"},a("calcite-date-month-header",{activeDate:n,dir:l,intlNextMonth:this.intlNextMonth,intlPrevMonth:this.intlPrevMonth,localeData:this.localeData,max:i,min:t,onCalciteActiveDateChange:t=>{this.setValue(new Date(t.detail)),this.activeDate=new Date(t.detail),this.calciteDateChange.emit(new Date(t.detail))},scale:this.scale,selectedDate:e||new Date}),a("calcite-date-month",{activeDate:n,dir:l,localeData:this.localeData,max:i,min:t,onCalciteActiveDateChange:t=>{this.activeDate=new Date(t.detail)},onCalciteDateSelect:t=>{this.setValue(new Date(t.detail)),this.activeDate=new Date(t.detail),this.calciteDateChange.emit(new Date(t.detail)),this.reset()},scale:this.scale,selectedDate:e})))}valueWatcher(t){this.setValueAsDate(t)}async loadLocaleData(){const{locale:t}=this;this.localeData=await b(t)}setupProxyInput(){if(this.inputProxy=this.el.querySelector("input"),!this.inputProxy){this.inputProxy=document.createElement("input");try{this.inputProxy.type="date"}catch(t){this.inputProxy.type="text"}this.syncProxyInputToThis(),this.el.appendChild(this.inputProxy)}this.syncThisToProxyInput(),this.observer=new MutationObserver(this.syncThisToProxyInput),this.observer.observe(this.inputProxy,{attributes:!0})}setValue(t){this.value=new Date(t).toISOString().split("T")[0],this.syncProxyInputToThis()}setValueAsDate(t){if(t){const i=o(t);i&&(this.valueAsDate=i)}}reset(){this.valueAsDate&&(this.activeDate=new Date(this.valueAsDate)),this.noCalendarInput||(this.active=!1)}input(t){const i=this.getDateFromInput(t);i&&(this.setValue(i),this.activeDate=i,this.calciteDateChange.emit(new Date(i)))}blur(t){!this.getDateFromInput(t.value)&&this.valueAsDate&&(t.value=this.valueAsDate.toLocaleDateString(this.locale))}getActiveDate(t,i,e){return h(this.activeDate,i,e)||t||h(new Date,i,e)}getDateFromInput(t){if(!this.localeData)return!1;const{separator:i}=this.localeData,{day:e,month:a,year:s}=d(t,this.localeData),n=e>0,c=a>-1,r=new Date(s,a,e);r.setFullYear(s);const o=!isNaN(r.getTime()),l=t.split(i).filter((t=>t)).length>2,h=s.toString().length>0;return!!(n&&c&&o&&l&&h&&u(r,this.min,this.max))&&r}static get assetsDirs(){return["calcite-date-nls"]}get el(){return n(this)}static get watchers(){return{value:["valueWatcher"],locale:["loadLocaleData"]}}};v.style="@keyframes calcite-fade-in{0%{opacity:0}100%{opacity:1}}@keyframes calcite-fade-in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes calcite-fade-in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes calcite-fade-in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-popper-transition:150ms ease-in-out}:host([hidden]){display:none}:host-context([theme=dark]){--calcite-ui-blue-1:#00A0FF;--calcite-ui-blue-2:#0087D7;--calcite-ui-blue-3:#47BBFF;--calcite-ui-green-1:#36DA43;--calcite-ui-green-2:#11AD1D;--calcite-ui-green-3:#44ED51;--calcite-ui-yellow-1:#FFC900;--calcite-ui-yellow-2:#F4B000;--calcite-ui-yellow-3:#FFE24D;--calcite-ui-red-1:#FE583E;--calcite-ui-red-2:#F3381B;--calcite-ui-red-3:#FF7465;--calcite-ui-background:#202020;--calcite-ui-foreground-1:#2b2b2b;--calcite-ui-foreground-2:#353535;--calcite-ui-foreground-3:#404040;--calcite-ui-text-1:#ffffff;--calcite-ui-text-2:#bfbfbf;--calcite-ui-text-3:#9f9f9f;--calcite-ui-border-1:#4a4a4a;--calcite-ui-border-2:#404040;--calcite-ui-border-3:#353535;--calcite-ui-border-4:#757575;--calcite-ui-border-5:#9f9f9f}:host{display:inline-block;vertical-align:top;width:100%;position:relative;overflow:visible}.slot{display:none}:host([scale=s]){max-width:216px}:host([scale=m]){max-width:286px}:host([scale=l]){max-width:398px}.calendar-icon{color:var(--calcite-ui-text-3);position:absolute;top:50%;margin:-8px 0.75rem;pointer-events:none}.calendar-picker-wrapper{box-shadow:var(--calcite-shadow-2);position:absolute;top:100%;background-color:var(--calcite-ui-foreground-1);opacity:0;width:100%;line-height:0;visibility:hidden;overflow:visible;transform:translate3d(0, -1.5rem, 0);transition:all 0.15s ease-in-out;pointer-events:none;z-index:3}.input .calcite-input-wrapper{margin-top:0}:host([active]){box-shadow:var(--calcite-shadow-2);background-color:var(--calcite-ui-foreground-1);border-radius:var(--calcite-border-radius)}:host([active]) .calendar-picker-wrapper{opacity:1;transform:translate3d(0, 0, 0);visibility:visible;pointer-events:initial}:host([active]) .date-input-wrapper{border:1px solid var(--calcite-ui-foreground-1);border-bottom:1px solid var(--calcite-ui-border-3)}:host([no-calendar-input]){box-shadow:none}:host([no-calendar-input]) .calendar-picker-wrapper{box-shadow:none;position:static;transform:translate3d(0, 0, 0);border-radius:none;border:1px solid var(--calcite-ui-border-2)}";export{v as calcite_date}