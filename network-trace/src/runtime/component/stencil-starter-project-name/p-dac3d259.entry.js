import{r as t,c as s,h as i,H as e,g as h}from"./p-551d452f.js";import{g as a}from"./p-ddb29161.js";import{g as n}from"./p-4bacf9d8.js";import{T as r,g as o}from"./p-ef7fb9f9.js";import{g as c,b as l,d,a as D}from"./p-0e811b43.js";const v=class{constructor(i){t(this,i),this.calciteDatePickerChange=s(this,"calciteDatePickerChange",7),this.calciteDatePickerRangeChange=s(this,"calciteDatePickerRangeChange",7),this.activeRange="start",this.headingLevel=2,this.intlPrevMonth=r.prevMonth,this.intlNextMonth=r.nextMonth,this.locale=document.documentElement.lang||"en",this.scale="m",this.range=!1,this.proximitySelectionDisabled=!1,this.hasShadow=!!document.head.attachShadow,this.keyUpHandler=t=>{"Escape"===n(t.key)&&this.reset()},this.monthHeaderSelectChange=t=>{const s=new Date(t.detail);this.range?("start"===this.activeRange?this.activeStartDate=s:"end"===this.activeRange&&(this.activeEndDate=s),this.mostRecentRangeValue=s):this.activeDate=s},this.monthActiveDateChange=t=>{const s=new Date(t.detail);this.range?("start"===this.activeRange?this.activeStartDate=s:"end"===this.activeRange&&(this.activeEndDate=s),this.mostRecentRangeValue=s):this.activeDate=s},this.monthHoverChange=t=>{if(!this.startAsDate)return this.hoverRange=void 0,this.hoverRange;const s=new Date(t.detail);this.hoverRange={focused:this.activeRange,start:this.startAsDate,end:this.endAsDate},this.proximitySelectionDisabled?this.endAsDate?this.hoverRange=void 0:s<this.startAsDate?this.hoverRange={focused:"start",start:s,end:this.startAsDate}:(this.hoverRange.end=s,this.hoverRange.focused="end"):this.endAsDate?c(s,this.startAsDate)<c(s,this.endAsDate)?(this.hoverRange.start=s,this.hoverRange.focused="start"):(this.hoverRange.end=s,this.hoverRange.focused="end"):s<this.startAsDate?this.hoverRange={focused:"start",start:s,end:this.startAsDate}:(this.hoverRange.end=s,this.hoverRange.focused="end")},this.monthMouseOutChange=()=>{this.hoverRange&&(this.hoverRange=void 0)},this.reset=()=>{var t,s,i,e,h,a;this.valueAsDate&&(null===(t=this.valueAsDate)||void 0===t?void 0:t.getTime())!==(null===(s=this.activeDate)||void 0===s?void 0:s.getTime())&&(this.activeDate=new Date(this.valueAsDate)),this.startAsDate&&(null===(i=this.startAsDate)||void 0===i?void 0:i.getTime())!==(null===(e=this.activeStartDate)||void 0===e?void 0:e.getTime())&&(this.activeStartDate=new Date(this.startAsDate)),this.endAsDate&&(null===(h=this.endAsDate)||void 0===h?void 0:h.getTime())!==(null===(a=this.activeEndDate)||void 0===a?void 0:a.getTime())&&(this.activeEndDate=new Date(this.endAsDate))},this.monthDateChange=t=>{const s=new Date(t.detail);if(!this.range)return this.value=l(s),void(this.activeDate=s);if(!this.startAsDate||!this.endAsDate&&s<this.startAsDate){if(this.startAsDate){const t=new Date(this.startAsDate);this.end=l(t),this.setEndAsDate(t,!0),this.activeEndDate=t}this.start=l(s),this.setStartAsDate(s,!0),this.activeStartDate=s}else this.endAsDate?this.proximitySelectionDisabled?(this.start=l(s),this.setStartAsDate(s,!0),this.activeStartDate=s,this.endAsDate=this.activeEndDate=this.end=void 0):c(s,this.startAsDate)<c(s,this.endAsDate)?(this.start=l(s),this.setStartAsDate(s,!0),this.activeStartDate=s):(this.end=l(s),this.setEndAsDate(s,!0),this.activeEndDate=s):(this.end=l(s),this.setEndAsDate(s,!0),this.activeEndDate=s)}}handleValueAsDate(t){this.activeDate=t,this.calciteDatePickerChange.emit(t)}handleRangeChange(){const{startAsDate:t,endAsDate:s}=this;this.activeEndDate=s,this.activeStartDate=t}focusInHandler(t){this.hasShadow||this.el.contains(t.target)||this.reset()}connectedCallback(){this.loadLocaleData(),this.value&&(this.valueAsDate=d(this.value)),this.start&&this.setStartAsDate(d(this.start)),this.end&&this.setEndAsDate(d(this.end))}render(){var t;const s=d(this.min),h=d(this.max),n=D(this.range?this.startAsDate:this.valueAsDate,s,h);let r=this.range?this.getActiveStartDate(n,s,h):this.getActiveDate(n,s,h);const o=this.range?D(this.endAsDate,s,h):null,c=this.getActiveEndDate(o,s,h);"end"!==this.activeRange&&("end"!==(null===(t=this.hoverRange)||void 0===t?void 0:t.focused)||this.proximitySelectionDisabled&&!o)||!c||(r=c),this.range&&this.mostRecentRangeValue&&(r=this.mostRecentRangeValue);const l="start"===this.activeRange?s:n||s,v=h,u=a(this.el);return i(e,{dir:u,onBlur:this.reset,onKeyUp:this.keyUpHandler,role:"application"},this.renderCalendar(r,u,v,l,n,o))}valueWatcher(t){this.valueAsDate=d(t)}startWatcher(t){this.setStartAsDate(d(t))}endWatcher(t){this.setEndAsDate(d(t))}async loadLocaleData(){const{locale:t}=this;this.localeData=await o(t)}renderCalendar(t,s,e,h,a,n){return this.localeData&&[i("calcite-date-picker-month-header",{activeDate:t,dir:s,headingLevel:this.headingLevel,intlNextMonth:this.intlNextMonth,intlPrevMonth:this.intlPrevMonth,localeData:this.localeData,max:e,min:h,onCalciteDatePickerSelect:this.monthHeaderSelectChange,scale:this.scale,selectedDate:"start"===this.activeRange?a:n||new Date}),i("calcite-date-picker-month",{activeDate:t,dir:s,endDate:this.range?n:void 0,hoverRange:this.hoverRange,localeData:this.localeData,max:e,min:h,onCalciteDatePickerActiveDateChange:this.monthActiveDateChange,onCalciteDatePickerHover:this.monthHoverChange,onCalciteDatePickerMouseOut:this.monthMouseOutChange,onCalciteDatePickerSelect:this.monthDateChange,scale:this.scale,selectedDate:"start"===this.activeRange?a:n,startDate:this.range?a:void 0})]}setStartAsDate(t,s){this.startAsDate=t,this.mostRecentRangeValue=this.startAsDate,s&&this.calciteDatePickerRangeChange.emit({startDate:t,endDate:this.endAsDate})}setEndAsDate(t,s){this.endAsDate=t,this.mostRecentRangeValue=this.endAsDate,s&&this.calciteDatePickerRangeChange.emit({startDate:this.startAsDate,endDate:t})}getActiveDate(t,s,i){return D(this.activeDate,s,i)||t||D(new Date,s,i)}getActiveStartDate(t,s,i){return D(this.activeStartDate,s,i)||t||D(new Date,s,i)}getActiveEndDate(t,s,i){return D(this.activeEndDate,s,i)||t||D(new Date,s,i)}static get assetsDirs(){return["assets"]}get el(){return h(this)}static get watchers(){return{valueAsDate:["handleValueAsDate"],startAsDate:["handleRangeChange"],endAsDate:["handleRangeChange"],value:["valueWatcher"],start:["startWatcher"],end:["endWatcher"],locale:["loadLocaleData"]}}};v.style="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-popper-transition:150ms ease-in-out}:host([hidden]){display:none}:host{display:inline-block;vertical-align:top;width:100%;position:relative;overflow:visible;border-radius:none;border:1px solid var(--calcite-ui-border-2);background-color:var(--calcite-ui-foreground-1)}:host([scale=s]){max-width:216px}:host([scale=m]){max-width:286px}:host([scale=l]){max-width:398px}";export{v as calcite_date_picker}