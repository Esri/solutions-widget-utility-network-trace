import{r as t,h as s,H as i}from"./p-551d452f.js";import{h as o}from"./p-ddb29161.js";import{g as h}from"./p-4bacf9d8.js";import{T as e,a as l}from"./p-e7199e51.js";const a=class{constructor(s){t(this,s),this.hoverTimeouts=new WeakMap,this.selector=`[${e}]`,this.queryTooltip=t=>o(t.closest(this.selector),e),this.clearHoverTimeout=t=>{const{hoverTimeouts:s}=this;s.has(t)&&window.clearTimeout(s.get(t))},this.closeExistingTooltip=()=>{const{tooltipEl:t}=this;t&&this.toggleTooltip(t,!1)},this.focusTooltip=({tooltip:t,value:s})=>{this.closeExistingTooltip(),s&&this.clearHoverTimeout(t),this.toggleTooltip(t,s)},this.toggleTooltip=(t,s)=>{t.open=s,s&&(this.tooltipEl=t)},this.hoverToggle=({tooltip:t,value:s})=>{const{hoverTimeouts:i}=this;i.delete(t),s&&this.closeExistingTooltip(),this.toggleTooltip(t,s)},this.hoverTooltip=({tooltip:t,value:s})=>{this.clearHoverTimeout(t);const{hoverTimeouts:i}=this,o=window.setTimeout((()=>this.hoverToggle({tooltip:t,value:s})),l);i.set(t,o)},this.activeTooltipHover=t=>{const{tooltipEl:s,hoverTimeouts:i}=this;s&&i.has(s)&&(t.composedPath().includes(s)?this.clearHoverTimeout(s):this.hoverTooltip({tooltip:s,value:!1}))},this.hoverEvent=(t,s)=>{const i=this.queryTooltip(t.target);this.activeTooltipHover(t),i&&this.hoverTooltip({tooltip:i,value:s})},this.focusEvent=(t,s)=>{const i=this.queryTooltip(t.target);i&&this.focusTooltip({tooltip:i,value:s})}}render(){return s(i,null)}keyUpHandler(t){if("Escape"===h(t.key)){const{tooltipEl:t}=this;t&&(this.clearHoverTimeout(t),this.toggleTooltip(t,!1))}}mouseEnterShow(t){this.hoverEvent(t,!0)}mouseLeaveHide(t){this.hoverEvent(t,!1)}focusShow(t){this.focusEvent(t,!0)}blurHide(t){this.focusEvent(t,!1)}};export{a as calcite_tooltip_manager}